{% extends 'addproducts.html' %}



{% block body %}

<div class="col-md-12 bg-light">
    <div class="table-responsive">
        <form method="POST" class="post-form" enctype="multipart/form-data" action="/mysuperadmin/pending_order_None">
            {% csrf_token %}
            <table class="table table-striped table-bordered" width="100%">
                <tbody width="94%" align="center">
                    <tr>
                        <td align="center">
                            <span><span>&nbsp; <strong>&nbsp;
                            <span>Order Manage Form</span></strong></span></span>
                        </td>
                    </tr>
                </tbody>

                <td  width="94%">
                    <div class="form-group row">  
 
                        <label id="show_member" class="col-sm-3 col-form-label">Name</label>  
                        <div class="col-sm-3">  
        
                            <input type="text" class="form-control" name="name" id="id_name"  value="{{search.name}}" readOnly />
                            <a id="run_for_member" href="" style="display:none;"></a>
                        </div>  
                    
                        <label class="col-sm-3 col-form-label">Mobile</label>  
                        <div class="col-sm-3">  
                            <input type="text" class="form-control" name="mobile" id="id_mobile" value="{{search.phone}}" maxlength="10" readOnly/>     
                        </div>  
                    </div>

                    <div class="form-group row">  
                        <label class="col-sm-3 col-form-label">Order Status</label>  
                        <div class="col-sm-3">  
                            <select class="form-control" name="order_status" id="id_order_status">
                                <option value="{{search.order_status}}">{{search.order_status}}</option>
                                <option value="Pending">Pending</option>
                                <option value="Accepted">Accepted</option>
                            </select>   
                              
                        </div>  
                        <label class="col-sm-3 col-form-label">Delivery Status</label>  
                        <div class="col-sm-3">  
                            <select class="form-control" name="delivery_status" id="delivery_status">
                                <option value="{{search.delivery_status}}">{{search.delivery_status}}</option>
                                <option value="Pending">Pending</option>
                                <option value="Delivered">Delivered</option>
                                <option value="Rejected">Rejected</option>
                            </select>   
                              
                        </div>  
                    </div>


            
                    
                    <div class="form-group row">  
                        <label class="col-sm-3 col-form-label">Remarks</label>  
                        <div class="col-sm-9">  
                            <input type="text" class="form-control" name="remarks" id="id_remarks"  value="{{search.remarks}}" maxlength="50" />     
                        </div>  
                        <input type="hidden" class="form-control" name="id" id="id_id"  value="{{search.order_id}}" /> 
                       
                    </div>  


                </td>           
     
            </table>
            <div class="form-group row" >
                <div class="col-sm-3"></div>
                <div class="col-sm-9">
                    <button style="border:none;" type="submit" value="Submit"><a class="btn btn-primary" type="submit" value="Submit" style="background-color: green;">Submit</a></button>
                
                    <a class="btn btn-primary" style="background-color: red;" href="/mysuperadmin/update_">Cancel</a>
                   
                </div>
            </div>

        </form>
    </div>
</div>
<div class="col-md-12 bg-light">    

            <center><h4><b>Order Status Pending</b></h4></center>
            <!-- <span><a href="/{{ user.username }}/addnewmember" class="btn btn-primary float-right">Add New Member</a></span>   -->
            <div class="table-responsive">
                <table id="bootstrapdatatable" class="table table-striped table-bordere" width="100%">
                    <thead>
                        <th style="text-align:center">Edit</th>
                        <th style="text-align:center">SL No.</th>
                        <th style="text-align:center">Name</th>
                        <th style="text-align:center">Mobile</th>
                        <th style="text-align:center">Email</th>
                        <th style="text-align:center">Order Date</th>
                        <th style="text-align:center">Order Status</th>
                        <th style="text-align:center">Deliver Status</th>
                        <th style="text-align:center">Delivery Date</th>
                        <th style="text-align:center">Address</th>
                        <th style="text-align:center">Order Details</th>
                        <th style="text-align:center">Remarks</th>

                    </thead>
                    <tbody>
                    {% for pending in pendings %}  
                        <tr>  
                            <td><p data-placement="top" data-toggle="tooltip" title="Edit"><a href="/mysuperadmin/pending_order_{{ pending.order_id }}" class="btn btn-primary btn-xs" data-title="Edit" ><span class="glyphicon glyphicon-pencil"></span></a></p></td>
                            <td style="text-align:center">{{ forloop.counter }}</td> 
                            <td style="text-align:center">{{ pending.name }}</td>  
                            <td style="text-align:center">{{ pending.phone }}</td>  
                            <td style="text-align:center">{{ pending.email }}</td>  
                            <td style="text-align:center">{{ pending.order_date|date:'j-M-Y g:i:s A'}}</td>  
                            <td style="text-align:center">{{ pending.order_status }}</td>  
                            <td style="text-align:center">{{ pending.delivery_status }}</td>  
                            <td style="text-align:center;">{{ pending.delivery_date|date:'j-M-Y g:i:s A' }}</td>  
                            <td style="text-align:center">{{ pending.address }}, {{ pending.city }}, {{ pending.state }}-{{ pending.zip_code }}</td> 
                            <td style="text-align:center">{{ pending.items_json }}</td> 
                            <td style="text-align:center">{{ pending.remarks }}</td>  
                

                        </tr>  
                    {% endfor %} 
                    </tbody>
     
                </table>

            </div>

     

            <center><h4><b>Order Successful Records</b></h4></center>
            
            <div class="table-responsive">
                <table id="bootstrapdatatabl" class="table table-striped table-bordered" width="100%">
                    <thead>
                        <!-- <th style="text-align:center">Edit</th> -->

                        <th style="text-align:center">SL No.</th>
                        <th style="text-align:center">Name</th>
                        <th style="text-align:center">Mobile</th>
                        <th style="text-align:center">Email</th>
                        <th style="text-align:center">Order Date</th>
                        <th style="text-align:center">Order Status</th>
                        <th style="text-align:center">Deliver Status</th>
                        <th style="text-align:center">Delivery Date</th>
                        <th style="text-align:center">Address</th>
                        <th style="text-align:center">Order Details</th>
                        <th style="text-align:center">Remarks</th>

                    </thead>
                    <tbody>
                    {% for success in delivered %}  
                        <tr>  
                            <!-- <td><p data-placement="top" data-toggle="tooltip" title="Edit"><a href="{{ success.payment_reference_no }}" class="btn btn-primary btn-xs" data-title="Edit" ><span class="glyphicon glyphicon-pencil"></span></a></p></td> -->
                            <td style="text-align:center">{{ forloop.counter }}</td> 
                            <td style="text-align:center">{{ success.name }}</td>  
                            <td style="text-align:center">{{ success.phone }}</td>  
                            <td style="text-align:center">{{ success.email }}</td>  
                            <td style="text-align:center">{{ success.order_date|date:'j-M-Y g:i:s A'}}</td>  
                            <td style="text-align:center">{{ success.order_status }}</td>  
                            <td style="text-align:center">{{ success.delivery_status }}</td>  
                            <td style="text-align:center;">{{ success.delivery_date|date:'j-M-Y g:i:s A' }}</td>  
                            <td style="text-align:center">{{ success.address }}, {{ success.city }}, {{ success.state }}-{{ success.zip_code }}</td> 
                            <td style="text-align:center">{{ success.items_json }}</td> 
                            <td style="text-align:center">{{ success.remarks }}</td>  
                

                        </tr>  
                    {% endfor %} 
                    </tbody>
     
                </table>

            </div>



    

            <center><h4><b>Order Rejected</b></h4></center>
        
            <div class="table-responsive">
                <table id="bootstrapdatatab" class="table table-striped table-bordered" width="100%">
                    <thead>
                        <!-- <th style="text-align:center">Edit</th> -->
               
                        <th style="text-align:center">SL No.</th>
                        <th style="text-align:center">Name</th>
                        <th style="text-align:center">Mobile</th>
                        <th style="text-align:center">Email</th>
                        <th style="text-align:center">Order Date</th>
                        <th style="text-align:center">Order Status</th>
                        <th style="text-align:center">Deliver Status</th>
                        <th style="text-align:center">Delivery Date</th>
                        <th style="text-align:center">Address</th>
                        <th style="text-align:center">Order Details</th>
                        <th style="text-align:center">Remarks</th>
                    </thead>
                    <tbody>
                    {% for reject in rejected %}  
                        <tr>  
                            <!-- <td><p data-placement="top" data-toggle="tooltip" title="Edit"><a href="{{ reject.payment_reference_no }}" class="btn btn-primary btn-xs" data-title="Edit" ><span class="glyphicon glyphicon-pencil"></span></a></p></td> -->
                            <td style="text-align:center">{{ forloop.counter }}</td> 
                            <td style="text-align:center">{{ reject.name }}</td>  
                            <td style="text-align:center">{{ reject.phone }}</td>  
                            <td style="text-align:center">{{ reject.email }}</td>  
                            <td style="text-align:center">{{ reject.order_date|date:'j-M-Y g:i:s A'}}</td>  
                            <td style="text-align:center">{{ reject.order_status }}</td>  
                            <td style="text-align:center">{{ reject.delivery_status }}</td>  
                            <td style="text-align:center;">{{ reject.delivery_date|date:'j-M-Y g:i:s A' }}</td>  
                            <td style="text-align:center">{{ reject.address }}, {{ reject.city }}, {{ reject.state }}-{{ reject.zip_code }}</td> 
                            <td style="text-align:center">{{ reject.items_json }}</td> 
                            <td style="text-align:center">{{ reject.remarks }}</td> 
                

                        </tr>  
                    {% endfor %} 
                    </tbody>
     
                </table>

            </div>
      
</div>

{% endblock body %}



{% block js%}
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
 
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>
<script>
    $(document).ready(function() {
        $('#bootstrapdatatable').DataTable({     
          "aLengthMenu": [[5, 10, 20, 50,100, -1], [5, 10, 20, 50,100, "All"]],
            "iDisplayLength": 5
           } 
        );
    } );

    $(document).ready(function() {
        $('#bootstrapdatatabl').DataTable({     
          "aLengthMenu": [[5, 10, 20, 50,100, -1], [5, 10, 20, 50,100, "All"]],
            "iDisplayLength": 5
           } 
        );
    } );
    
    $(document).ready(function() {
        $('#bootstrapdatatab').DataTable({     
          "aLengthMenu": [[5, 10, 20, 50,100, -1], [5, 10, 20, 50,100, "All"]],
            "iDisplayLength": 5
           } 
        );
    } );
    
    
    var y = document.getElementById("id_payment_reference_no")

    if(y.value == 0 || y.value == "None"){
        y.style.display="none";
        document.getElementById("show_ref").style.display = "none"; 
        document.getElementById("id_member_id").readOnly = false;
    }else{
        document.getElementById("show_member").style.display = "none"; 
        document.getElementById("id_full_name").style.display = "none";
        document.getElementById("id_member_id").readOnly = true;
    };

    var myInput = document.getElementById('id_member_id')

    myInput.onkeyup = function() {
    
        if(myInput.value==0){
            window.location = "/myAdmin/payment_status/None"
        } else {
            if(myInput.value.length == 9){
                window.location = "/myAdmin/search_member_" + document.getElementById("id_member_id").value; 
            }
        }
          
    }

</script>
{% endblock js %} 